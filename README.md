# CogniStruct

–ú–æ–¥—É–ª—å–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–ª–∞–≥–∏–Ω–æ–≤.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîå –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–ª–∞–≥–∏–Ω–æ–≤
- üß† –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö LLM (OpenAI, DeepSeek, Ollama)
- üõ†ÔøΩ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞ (streaming)
- üõ† –°–∏—Å—Ç–µ–º–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- üíæ –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å
- üìÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram
- üé® –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Markdown –≤ –∫–æ–Ω—Å–æ–ª–∏
- üåê REST API —Å –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/your-username/cognistruct.git
cd cognistruct
```

2. –°–æ–∑–¥–∞–µ–º –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
# –°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ–≥–æ:
# - –¥–ª—è Linux/macOS:
source venv/bin/activate
# - –¥–ª—è Windows:
# venv\Scripts\activate
```

3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á–∏ –∏ —Ç–æ–∫–µ–Ω—ã —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫:
```bash
python setup_config.py
```
–ü–æ–º–æ—â–Ω–∏–∫ –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ (–≤—Å–µ –ø–æ–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã):
- DeepSeek API –∫–ª—é—á (–¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è DeepSeek LLM)
- Telegram —Ç–æ–∫–µ–Ω (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ Telegram –±–æ—Ç–∞)
- –ö—Ä–µ–¥–µ–Ω—à–ª—ã –¥–ª—è REST API (–¥–ª—è –∑–∞—â–∏—Ç—ã API endpoints)

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª `~/.cognistruct/config` –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
# 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω—ã)
# 2. –§–∞–π–ª ~/.cognistruct/config (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
export DEEPSEEK_API_KEY=your_api_key
export TELEGRAM_BOT_TOKEN=your_bot_token
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤:
```bash
# –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç —Å Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π):
python examples/example_simple_agent.py

# –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç —Å DeepSeek:
python examples/example_simple_agent.py  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

# Telegram –±–æ—Ç
python examples/example_telegram_agent.py  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

# REST API —Å–µ—Ä–≤–µ—Ä
python examples/example_rest_agent.py
```

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é LLM –ø—Ä—è–º–æ –≤ —Ñ–∞–π–ª–∞—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ `example_simple_agent.py`:

```python
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è LLM (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç)
LLM_CONFIG = {
    # –î–ª—è Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π):
    "provider": "ollama",
    "model": "qwen2.5",
    "api_key": "ollama",
    
    # –î–ª—è DeepSeek:
    #"provider": "deepseek",
    #"model": "deepseek-chat",
    #"api_key": Config.load().deepseek_api_key,  # –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
    "temperature": 0.5
}
```

## –ü–ª–∞–≥–∏–Ω—ã

### RESTApiPlugin
REST API —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π CRUDS —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏ Swagger/ReDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π.

```python
rest_api = RESTApiPlugin(
    port=8000,                    # –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞
    enable_auth=True,             # –í–∫–ª—é—á–∏—Ç—å JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
    admin_username="admin",       # –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è API
    admin_password="secret",      # –ü–∞—Ä–æ–ª—å –¥–ª—è API
    allowed_origins=["*"]         # CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
)

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
# - POST   /auth/token           # –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞
# - POST   /chat                 # –ß–∞—Ç —Å –∞–≥–µ–Ω—Ç–æ–º
# - POST   /api/{plugin}         # –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞
# - GET    /api/{plugin}/{id}    # –ß—Ç–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞
# - PUT    /api/{plugin}/{id}    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞
# - DELETE /api/{plugin}/{id}    # –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞
# - POST   /api/{plugin}/search  # –ü–æ–∏—Å–∫ —Ä–µ—Å—É—Ä—Å–æ–≤
```

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- üîê JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- üìö Swagger UI –∏ ReDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è CRUDS API
- üí¨ –ß–∞—Ç —Å –∞–≥–µ–Ω—Ç–æ–º —á–µ—Ä–µ–∑ API
- üåç CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- üìù –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã

### InternetPlugin
–ü–æ–∏—Å–∫ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.

```python
internet = InternetPlugin(
    max_search_results=5,     # –ú–∞–∫—Å–∏–º—É–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
    min_word_count=20,        # –ú–∏–Ω–∏–º—É–º —Å–ª–æ–≤ –≤ –±–ª–æ–∫–µ —Ç–µ–∫—Å—Ç–∞
)

# –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
results = await internet.execute_tool("search", {
    "query": "Python async programming"
})
# -> –°–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
content = await internet.execute_tool("crawl", {
    "url": "https://example.com/article"
})
# -> Markdown –∫–æ–Ω—Ç–µ–Ω—Ç —Å–æ —Å—Å—ã–ª–∫–∞–º–∏ –∏ –º–µ–¥–∏–∞
```

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- üîç –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ DuckDuckGo
- üìù –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ Markdown
- üîó –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∏ –≤–Ω–µ—à–Ω–∏—Ö —Å—Å—ã–ª–æ–∫
- üñºÔ∏è –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ü§ñ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JavaScript –∏ iframe
- üö´ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ø–∞–ø–æ–≤
- üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### LongTermMemoryPlugin
–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å —Å —É–º–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∏ —Ç–µ–≥–∞–º.

```python
memory = LongTermMemoryPlugin(
    max_context_memories=5,     # –ú–∞–∫—Å–∏–º—É–º —Ñ–∞–∫—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
    recency_weight=0.3,        # –í–µ—Å –Ω–µ–¥–∞–≤–Ω–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π (0-1)
    db_path="memory.db"        # –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
)

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–∫—Ç–∞
await memory.execute_tool("remember", {
    "fact": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç –∫—Ä–∞—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã",
    "tags": ["preferences", "communication"]
})

# –ü–æ–∏—Å–∫ —Ñ–∞–∫—Ç–æ–≤
results = await memory.execute_tool("recall", {
    "query": "–ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
})
```

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- üß† –£–º–Ω—ã–π –ø–æ–∏—Å–∫ —Å TF-IDF –∏ –∫–æ—Å–∏–Ω—É—Å–Ω—ã–º —Å—Ö–æ–¥—Å—Ç–≤–æ–º
- üè∑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–≥–æ–≤ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚è± –£—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ RAG
- üìä –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ —Å–≤–µ–∂–µ—Å—Ç–∏

### VersionedStoragePlugin
–•—Ä–∞–Ω–∏–ª–∏—â–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å —É–º–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

```python
storage = VersionedStoragePlugin(
    version_weight=0.3,  # –í–µ—Å –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–∏
    time_weight=0.2      # –í–µ—Å –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è
)

# –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ —Å —Ç–µ–≥–∞–º–∏
note_id = storage.generate_id("note", "–ú–æ—è –ø–µ—Ä–≤–∞—è –∑–∞–º–µ—Ç–∫–∞")
await storage.create({
    "key": note_id,
    "value": {"text": "–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ"},
    "metadata": {
        "tags": ["important", "project"],
        "author": "user"
    }
})

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é)
await storage.update(note_id, {
    "value": {"text": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ"},
    "metadata": {
        "tags": ["important", "project", "updated"],
        "edited_by": "ai"
    }
})

# –£–º–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ–º
notes = await storage.search({
    "text_query": "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ",  # –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
    "tags": ["important"],                 # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–≥–∞–º
    "latest_only": True                    # –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
})

# –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ ID –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
chapter_id = storage.generate_hierarchical_id("story", "chapter1", "scene2")
# -> "story/chapter1/scene2"
```

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- üß† –£–º–Ω—ã–π –ø–æ–∏—Å–∫ —Å TF-IDF –∏ –∫–æ—Å–∏–Ω—É—Å–Ω—ã–º —Å—Ö–æ–¥—Å—Ç–≤–æ–º
- üìù –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- üè∑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–≥–æ–≤ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- üìä –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏, –≤–µ—Ä—Å–∏–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏
- üìÇ –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, "story/chapter1/scene2")
- üîÑ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ asyncio
- üîí –ù–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQLite

### ConsolePlugin
–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Markdown –∏ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞.

```python
console = ConsolePlugin(
    prompt="üë§ ",                    # –°—Ç—Ä–æ–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤–≤–æ–¥–∞
    exit_command="exit",             # –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã—Ö–æ–¥–∞
    exit_message="\nüëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!", # –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
    use_markdown=True,               # –í–∫–ª—é—á–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Markdown
    use_emojis=True,                 # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–º–æ–¥–∑–∏
    refresh_rate=10                  # –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ (–∫–∞–¥—Ä–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É)
)

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å—Ç—Ä–∏–º–∏–Ω–≥–∞
async def handle_message(message: IOMessage):
    await agent.process_message(
        message.content,
        stream=True  # –í–∫–ª—é—á–∞–µ–º —Å—Ç—Ä–∏–º–∏–Ω–≥
    )

console.set_message_handler(handle_message)
```

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- üåä –ü–æ—Ç–æ–∫–æ–≤—ã–π –≤—ã–≤–æ–¥ –æ—Ç–≤–µ—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üé® –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Markdown —Å –∂–∏–≤—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- üîß –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚ú® –ö—Ä–∞—Å–∏–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —ç–º–æ–¥–∑–∏
- üñ•Ô∏è –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### ShortTermMemory
–•—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–≤—è–∑–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞.

```python
memory = ShortTermMemoryPlugin(
    max_messages=15  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö—Ä–∞–Ω–∏–º—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–ø—Ä–∏–º–µ—Ä–Ω–æ 7-8 –æ–±–º–µ–Ω–æ–≤ —Ä–µ–ø–ª–∏–∫–∞–º–∏)
)
```

–ü–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –∏ –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –î–æ–±–∞–≤–ª—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è LLM
- –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö
- –•—Ä–∞–Ω–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ SQLite –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### Calculator
–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

```python
calculator = CalculatorPlugin()
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: "calculate 2 + 2"
```

### Scheduler
–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.

```python
scheduler = SchedulerPlugin(
    tick_interval=1.0,
    timezone="Europe/Moscow"
)
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: "schedule_task ..."
```

## –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

```python
from agents import BaseAgent
from llm import LLMRouter
from plugins.console_plugin import ConsolePlugin
from plugins.example_plugin import CalculatorPlugin
from functools import partial

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è LLM
LLM_CONFIG = {
    "provider": "deepseek",
    "model": "deepseek-chat",
    "api_key": "YOUR_API_KEY"
}

# –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
SYSTEM_PROMPT = """
–¢—ã - –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –î–ª—è –õ–Æ–ë–´–• –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç calculate.
–ù–ò–ö–û–ì–î–ê –Ω–µ –ø—ã—Ç–∞–π—Å—è –≤—ã—á–∏—Å–ª—è—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.
""".strip()

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è LLM
llm = LLMRouter().create_instance(**LLM_CONFIG)

# –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ (–±–µ–∑ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–∞–≥–∏–Ω–æ–≤)
agent = BaseAgent(llm=llm, auto_load_plugins=False)

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤
calculator = CalculatorPlugin()
console = ConsolePlugin(
    prompt="üë§ ",
    exit_command="exit",
    exit_message="\nüëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!",
    use_markdown=True,
    use_emojis=True,
    refresh_rate=10
)

# –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫ –∫–æ–Ω—Å–æ–ª–∏
console.set_message_handler(
    partial(agent.handle_message, system_prompt=SYSTEM_PROMPT, stream=True)
)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–ª–∞–≥–∏–Ω—ã
await calculator.setup()
await console.setup()

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤
agent.plugin_manager.register_plugin("calculator", calculator)
agent.plugin_manager.register_plugin("console", console)

try:
    # –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞ –∏ –∫–æ–Ω—Å–æ–ª–∏
    await agent.start()
    await console.start()
except Exception as e:
    print(f"\n‚ùå –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {str(e)}")
    raise
finally:
    # –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
    await agent.cleanup()
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω, —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–≤—à–∏—Å—å –æ—Ç BasePlugin:

```python
from plugins.base_plugin import BasePlugin, PluginMetadata, IOMessage

class MyPlugin(BasePlugin):
    def get_metadata(self) -> PluginMetadata:
        return PluginMetadata(
            name="my_plugin",
            description="–û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞",
            version="1.0.0",
            priority=50
        )
        
    async def input_hook(self, message: IOMessage) -> bool:
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
        return False
        
    async def output_hook(self, message: IOMessage):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
        pass
```


## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
