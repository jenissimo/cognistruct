# CogniStruct

–ú–æ–¥—É–ª—å–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–ª–∞–≥–∏–Ω–æ–≤.

---

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîå **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ø–ª–∞–≥–∏–Ω—ã —Ä–∞—Å—à–∏—Ä—è—é—Ç –±–∞–∑–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞.
- üß† **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö LLM:** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI, DeepSeek, Ollama.
- üõ† **–ü–æ—Ç–æ–∫–æ–≤—ã–π –≤—ã–≤–æ–¥ (streaming):** –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.
- üõ† **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:** —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã.
- üíæ **–ü–∞–º—è—Ç—å:** –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
- üìÖ **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫:** —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.
- üì± **Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –∑–∞–ø—É—Å–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞.
- üé® **Markdown:** –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏.
- üåê **REST API:** —Å –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π (Swagger/ReDoc).

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/jenissimo/cognistruct.git
cd cognistruct
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è:
# –î–ª—è Linux/macOS:
source venv/bin/activate
# –î–ª—è Windows:
# venv\Scripts\activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–µ–π –∏ —Ç–æ–∫–µ–Ω–æ–≤:

```bash
python setup_config.py
```

–ü–æ–º–æ—â–Ω–∏–∫ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –≤–≤–µ—Å—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–≤—Å–µ –ø–æ–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã):

- **DeepSeek API –∫–ª—é—á**
- **Telegram —Ç–æ–∫–µ–Ω**
- **–ö—Ä–µ–¥–µ–Ω—à–ª—ã –¥–ª—è REST API**

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `~/.cognistruct/config` –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export DEEPSEEK_API_KEY=your_api_key
export TELEGRAM_BOT_TOKEN=your_bot_token
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã:

```bash
# –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å Ollama):
python examples/example_simple_agent.py

# –ê–≥–µ–Ω—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º DeepSeek:
python examples/example_simple_agent.py  # –ö–ª—é—á –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

# Telegram –±–æ—Ç:
python examples/example_telegram_agent.py  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

# REST API —Å–µ—Ä–≤–µ—Ä:
python examples/example_rest_agent.py
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é LLM –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Ñ–∞–π–ª–∞—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```python
LLM_CONFIG = {
    # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è Ollama (–ª–æ–∫–∞–ª—å–Ω–æ):
    "provider": "ollama",
    "model": "qwen2.5",
    "api_key": "ollama",
    
    # –ü—Ä–∏–º–µ—Ä –¥–ª—è DeepSeek:
    # "provider": "deepseek",
    # "model": "deepseek-chat",
    # "api_key": Config.load().deepseek_api_key,
    "temperature": 0.5
}
```

---

## –û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤

### RESTApiPlugin

–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é CRUDS —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π Swagger/ReDoc –∏ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.

```python
rest_api = RESTApiPlugin(
    port=8000,                    # –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞
    enable_auth=True,             # –í–∫–ª—é—á–∏—Ç—å JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
    admin_username="admin",       # –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    admin_password="secret",      # –ü–∞—Ä–æ–ª—å
    allowed_origins=["*"]         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ CORS
)
```

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**

- `POST /auth/token` ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ JWT
- `POST /chat` ‚Äì —á–∞—Ç —Å –∞–≥–µ–Ω—Ç–æ–º
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤:
  - `POST /api/{plugin}`
  - `GET /api/{plugin}/{id}`
  - `PUT /api/{plugin}/{id}`
  - `DELETE /api/{plugin}/{id}`
  - `POST /api/{plugin}/search` ‚Äì –ø–æ–∏—Å–∫ —Ä–µ—Å—É—Ä—Å–æ–≤

---

### InternetPlugin

–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –∏ –∏–∑–≤–ª–µ–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç.

```python
internet = InternetPlugin(
    max_search_results=5,     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
    min_word_count=20         # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ –Ω–∞ –±–ª–æ–∫ —Ç–µ–∫—Å—Ç–∞
)

results = await internet.execute_tool("search", {
    "query": "Python async programming"
})
content = await internet.execute_tool("crawl", {
    "url": "https://example.com/article"
})
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- üîç –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ DuckDuckGo.
- üìù –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown.
- üîó –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –∏ –º–µ–¥–∏–∞.
- üö´ –£–¥–∞–ª–µ–Ω–∏–µ popup-–æ–≤ –∏ –ª–∏—à–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

---

### LongTermMemoryPlugin

–ü–ª–∞–≥–∏–Ω –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏ —Å —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —É–º–Ω—ã–º –ø–æ–∏—Å–∫–æ–º.

```python
memory = LongTermMemoryPlugin(
    max_context_memories=5,     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —Ñ–∞–∫—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
    recency_weight=0.3,         # –í–µ—Å –Ω–µ–¥–∞–≤–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (0-1)
    db_path="memory.db"
)

await memory.execute_tool("remember", {
    "fact": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç –∫—Ä–∞—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã",
    "tags": ["preferences", "communication"]
})

results = await memory.execute_tool("recall", {
    "query": "–ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
})
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- TF-IDF –∏ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.
- –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ñ–∞–∫—Ç–æ–≤.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ RAG.
- –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è.

---

### VersionedStoragePlugin

–•—Ä–∞–Ω–∏–ª–∏—â–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å —É–º–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

```python
storage = VersionedStoragePlugin(
    version_weight=0.3,  # –í–µ—Å –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–∏
    time_weight=0.2      # –í–µ—Å –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è
)

note_id = storage.generate_id("note", "–ú–æ—è –ø–µ—Ä–≤–∞—è –∑–∞–º–µ—Ç–∫–∞")
await storage.create({
    "key": note_id,
    "value": {"text": "–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ"},
    "metadata": {
        "tags": ["important", "project"],
        "author": "user"
    }
})
```

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é. –¢–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID:

```python
chapter_id = storage.generate_hierarchical_id("story", "chapter1", "scene2")
# -> "story/chapter1/scene2"
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- TF-IDF –∏ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ–∏—Å–∫–∞.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–≥–æ–≤ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.
- –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏.

---

### ConsolePlugin

–ü–ª–∞–≥–∏–Ω –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Markdown –∏ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞.

```python
console = ConsolePlugin(
    prompt="üë§ ",                    # –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∫ –≤–≤–æ–¥—É
    exit_command="exit",             # –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã—Ö–æ–¥–∞
    exit_message="\nüëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!",# –ü—Ä–æ—â–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    use_markdown=True,               # –í–∫–ª—é—á–µ–Ω–∏–µ Markdown
    use_emojis=True,                 # –≠–º–æ–¥–∑–∏ –≤ –≤—ã–≤–æ–¥–µ
    refresh_rate=10                  # –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (FPS)
)

async def handle_message(message: IOMessage):
    await agent.process_message(
        message.content,
        stream=True  # –í–∫–ª—é—á—ë–Ω —Å—Ç—Ä–∏–º–∏–Ω–≥
    )

console.set_message_handler(handle_message)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–æ–≤.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Markdown.
- –í–∏–∑—É–∞–ª—å–Ω–æ –ø—Ä–∏—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —ç–º–æ–¥–∑–∏.

---

### ShortTermMemory

–ü–ª–∞–≥–∏–Ω –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–π.

```python
memory = ShortTermMemoryPlugin(
    max_messages=15  # –û–∫–æ–ª–æ 7-8 –æ–±–º–µ–Ω–æ–≤ —Ä–µ–ø–ª–∏–∫–∞–º–∏
)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç.
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –º–µ—Ä–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞.
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ SQLite.

---

### CalculatorPlugin

–ü–ª–∞–≥–∏–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

```python
calculator = CalculatorPlugin()
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: "calculate 2 + 2"
```

---

### SchedulerPlugin

–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏.

```python
scheduler = SchedulerPlugin(
    tick_interval=1.0,     # –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    timezone="Europe/Moscow"
)
# –ü—Ä–∏–º–µ—Ä: "schedule_task ..."
```

---

## –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤:

```python
from core import BaseAgent
from llm import LLMRouter
from plugins.io.console import ConsolePlugin
from plugins.tools.calculate import CalculatorPlugin
from functools import partial

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è LLM
LLM_CONFIG = {
    "provider": "deepseek",
    "model": "deepseek-chat",
    "api_key": "YOUR_API_KEY"
}

# –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
SYSTEM_PROMPT = """
–¢—ã - –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –î–ª—è –õ–Æ–ë–´–• –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç calculate.
–ù–ò–ö–û–ì–î–ê –Ω–µ –ø—ã—Ç–∞–π—Å—è –≤—ã—á–∏—Å–ª—è—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.
""".strip()

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è LLM
llm = LLMRouter().create_instance(**LLM_CONFIG)

# –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ (–±–µ–∑ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–∞–≥–∏–Ω–æ–≤)
agent = BaseAgent(llm=llm, auto_load_plugins=False)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤
calculator = CalculatorPlugin()
console = ConsolePlugin(
    prompt="üë§ ",
    exit_command="exit",
    exit_message="\nüëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!",
    use_markdown=True,
    use_emojis=True,
    refresh_rate=10
)

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–æ–Ω—Å–æ–ª–∏
console.set_message_handler(
    partial(agent.handle_message, system_prompt=SYSTEM_PROMPT, stream=True)
)

# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤
await calculator.setup()
await console.setup()

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤ –≤ –∞–≥–µ–Ω—Ç–µ
agent.plugin_manager.register_plugin("calculator", calculator)
agent.plugin_manager.register_plugin("console", console)

try:
    # –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞ –∏ –∫–æ–Ω—Å–æ–ª–∏
    await agent.start()
    await console.start()
except Exception as e:
    print(f"\n‚ùå –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {str(e)}")
    raise
finally:
    # –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
    await agent.cleanup()
```

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω, —É–Ω–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç `BasePlugin`:

```python
from core.base_plugin import BasePlugin, PluginMetadata, IOMessage

class MyPlugin(BasePlugin):
    def get_metadata(self) -> PluginMetadata:
        return PluginMetadata(
            name="my_plugin",
            description="–û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞",
            version="1.0.0",
            priority=50
        )
        
    async def input_hook(self, message: IOMessage) -> bool:
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
        # –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ True, –µ—Å–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ø–ª–∞–≥–∏–Ω–æ–º
        return False
        
    async def output_hook(self, message: IOMessage):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
        pass
```

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π [MIT License](LICENSE).

---